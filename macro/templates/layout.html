<!doctype html>
<html lang="en">
  <head>
    {# Required meta tags #}
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {# Bootstrap 5 CSS #}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    {# Bootstrap Icons #}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    {# Add DataTables CSS #}
    <link href="https://cdn.datatables.net/v/bs5/dt-1.13.5/r-2.5.0/sc-2.2.0/datatables.min.css" rel="stylesheet"/>
    {# Select2 #}
    <link href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" />    
    {# Custom CSS #}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}"> 
    {% block css %}{% endblock %}
    <title>MACRO - {% block title %}{% endblock %}</title>
  </head>
  <body class="overflow-x-hidden">

    {# NAVBAR #}
    <nav class="navbar sticky-top bg-primary border-bottom shadow">
      <div class="container-fluid">
        <span class="navbar-text fs-4 text-light">MACRO</span>
      </div>
    </nav>

    {# MAIN #}
    <main role="main"> 
      <div id="container-fluid p-1">
        {# MESSAGES #}           
        {% with messages = get_flashed_messages(with_categories=true) %} 
          {% if messages %} 
            {% for category, message in messages %} 
              <div class="alert alert-{{ category }} d-flex justify-content-center align-items-center m-4 alert-dismissible fade show" role="alert"> 
                {% if category == "success" %} 
                  <i class="bi bi-check-circle-fill"></i> 
                {% elif category == "danger" %} 
                  <i class="bi bi-exclamation-triangle-fill"></i> 
                {% elif category == "info" %} 
                  <i class="bi bi-info-circle-fill"></i> 
                {% endif %} 
                <div class="ms-3">{{ message|safe }}</div> 
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button> 
              </div> 
            {% endfor %} 
          {% endif %} 
        {% endwith %} 

        {# CONTENT #}
        <div class="row"> 
          {# SIDEBAR #} 
          <div class="col-md-3 col-lg-2 p-0 bg-body-tertiary border-end rounded-end-3 shadow">
            <nav class="nav nav-pills flex-column gap-2 px-2 py-4">
              <a class="nav-link {% if request.path == url_for('.upload') %}active{% endif %}"
                 href="{{ url_for('.upload') }}">
                 <i class="bi bi-upload px-2"></i>Upload data
              </a> 
              <a class="nav-link {% if request.path == url_for('.viewdata') %}active{% endif %}"
                 href="{{ url_for('.viewdata') }}">
                 <i class="bi bi-eye px-2"></i>View uploaded data
              </a>
              <a class="nav-link {% if request.path == url_for('.runmodels') %}active{% endif %}"
                 href="{{ url_for('.runmodels') }}">
                 <i class="bi bi-play px-2"></i>Run model
              </a>
              <a class="nav-link"
                 href="#"><i class="bi bi-activity px-2"></i>Model output
              </a>
            </nav>
          </div> {# col #}
          {# MAIN CONTENT #}
          <div class="col-md-9 col-lg-10 ms-sm-auto p-0 px-md-4 my-5"> 
            {% block content %}{% endblock %} 
          </div> {# col #} 
        </div> {# row #} 
      </div> {# container #}
    </main>

    {# FOOTER #}
    <footer class="border-top text-muted">
      <div class="d-flex justify-content-between align-items-center m-3 p-1"> 
        <div>
          {# Copyright #} 
          <i class="bi bi-c-circle"></i> 2023 Nicol√°s Nieto
        </div> 
        {# Back to top #} 
        <div class="ms-auto"> 
          <a href="javascript:void(0)" onclick="window.scrollTo({top:0,left:0,behavior:'smooth'});" class="text-primary"> 
            <i class="bi bi-caret-up-square-fill" style="font-size: 1.5rem;"></i> 
          </a> 
        </div> 
      </div> {# flex #} 
    </footer>

    {% block scripts %}
      {# Bootstrap 5 bundled JS #}
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
              integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
      {# jQuery #}
      <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.0/dist/jquery.min.js"
              integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
      {# Add DataTables JS #}
      <script src="https://cdn.datatables.net/v/bs5/dt-1.13.5/r-2.5.0/sc-2.2.0/datatables.min.js"></script>
      {# Select2 #}
      <script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.full.min.js"></script>              
    {% endblock %}
  </body>
</html>
